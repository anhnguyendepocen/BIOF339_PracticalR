---
title: "Lecture 2 Practicum"
author: "Abhijit Dasgupta "
date: "September 19, 2018"
output: html_document
---

```{r, echo=FALSE}
knitr::opts_chunk$set(eval = FALSE, echo = FALSE) # Suppress all code and solutions
```


## Read and load a data set in Excel

We will read a breast cancer data set available at [http://www.araastat.com/BIOF339_PracticalR/Lectures/lecture2_files/BreastCancer.xlsx](lecture2_files/BreastCancer.xlsx). This 
is an Microsoft Excel file of 569 subjects with breast tumor biopsies. The objective of 
this data set and study was to predict the class of tumor (malignant/benign) from several 
tumor characteristics.

1. Use the function `download.file` to download this file to your computer, specifying where you save it.

```{r}
download.file('http://www.araastat.com/BIOF339_PracticalR/Lectures/lecture2_files/BreastCancer.xlsx', 'BreastCancer.xlsx')
```

2. Install the package `readxl` from your favorite CRAN mirror
```{r, eval=FALSE}
install.packages('readxl', repos='http://cran.rstudio.com')
```

3. Read the file in to R using the `read_excel` function from the `readxl` package.

```{r}
library(readxl)
dat <- read_excel('BreastCancer.xlsx')
dat <- data.frame(dat, stringsAsFactors = F) # Convert file to a data frame, remove spaces from names
```

4. Try to also read the file directly from the web with the `read_excel` package from the web URL __(My bad: this can't be done. You need to download the file first. However, this can be done for a CSV file using read.csv)__



## Data Exploration

1. Find the structure of this data set
```{r}
str(dat)
```

2. Find the dimension of this data set
```{r}
dim(dat)
```

3. Create new variables that are the differences between the worst recorded and mean values of each predictor (radius, texture, perimeter, etc) as new columns in the data
```{r}
names(dat)

dat <- transform(dat, diff.radius = worst.radius - mean.radius)
```

4. Create two subsets based on tumor status

```{r}
dat_malignant <- dat[dat$Status=='malignant',]
dat_benign <- dat[dat$Status=='benign',]
```

5. In each subset, compute summaries of the different mean variables

```{r, results='hide'}
summary(dat_malignant[,1:9])
summary(dat_benign[,1:9])
```

```{r, results='hide'}
library(stringr)

mean_vars = str_detect(names(dat_malignant),'mean') # Gets column names with "mean" in it
summary(dat_malignant[,mean_vars])

```

```{r, results='hide', warnings=FALSE, message=FALSE}
library(dplyr)
mean_cols <- select(dat_malignant, starts_with('mean'))
summary(mean_cols)
```

## Notes

1. If you have SAS or SPSS data sets then you can use the `haven` package to load them into R. You may
have to install it.
